<%= render "modals" %>

<table>
  <tr>
    <td><h1><%= @event.title %></h1> </td>
    <td><h2><%= pack_event_range %></h2></td>
    <td align=right>
      <button class="btn btn-primary" data-toggle="modal" data-target="#packEvent">Event Details</button>
      <button class="btn btn-primary" onclick="javascript:alert('Choose Facebook/Twitter/Gear Goat (or enter emails) to share with friends/accomplices.')">Share Pack</button>
      <button class="btn btn-primary" onclick="javascript:alert('Choose Gear Goat friends/events to compare packs (including self/previous packs)')">Compare</button>
      <button class="btn btn-primary" onclick="javascript:alert('Print picklist')">Print Picklist</button>
<button class="btn btn-warning" data-toggle="modal" data-target="#packItem">Development tasks</button>
    </td>
  </tr>
</table>
<table>
  <tr>
    <td><h3>Pack details</h3></td>
    <td align=right><%#= link_to "Edit", edit_pack_path(@pack) %></td>
  </tr>
</table>

<table class=table>
  <thead>
  <th align=left>Total pack weight</th>
  <th align=left>Target pack weight</th>
  <th align=left>Total worn weight</th>
  <th align=left>Total delivery weight</th>
  </thead>
  <tr>
    <td width="25%"><span style="color:red;font-weight:bold"><%= total_pack_weight %></span></td>
    <td width="25%"><%= target_weight %></td>
    <td width="25%"><%= total_wearing_weight %></td>
    <td width="25%"><%= total_delivery_weight %></td>
  </tr>
</table>

<!-- FORMERLY "_items.html.erb" PARTIAL -->
<h3>Pack contents</h3>
<div class="bs-example">
  <div class="panel-group" id="accordion">
    <% @categories.each do |category| %>
      <div class="panel panel-default">
      <div class="panel-heading" data-toggle="collapse" href="#collapse<%= category.id %>">
        <table>
          <tr>
            <td><h4 class="panel-default"><%= category.category_name %></h4></td>
            <td align=right><h4><%= pack_weight_by_category(category.id) %></h4></td>
          </tr>
        </table>
        </div>
        <div id="collapse<%= category.id %>" class="panel-collapse collapse in">
          <div class="panel-body">
            <table class="table table-striped">
        <% if pack_items_by_category(category.id).length > 0 then%>
          <th style="background-color:white">&nbsp;</th>
          <th style="background-color:white">Name</th>
          <th style="background-color:white">Description</th>
          <th style="background-color:white">Manufacturer</th>
          <th style="background-color:white">Weight&nbsp;(oz)</th>
          <th style="background-color:white">Count</th>
            <% reset_cycle %>
        <% end %>
        <% pack_items_by_category(category.id).each do |item| %>
          <%# if item.highlight then                    # come back to this once you figure out how to stripe rows regardless of highlight color %>
          <!-- <tr style="background-color:<%= item.highlight %>;"> -->
          <%# else                              # probably do the highlight by grabbing the row ID and setting it with JS after it has been striped %>
          <tr style="background-color:<%= cycle('#EEE', '#FFF') -%>">           
          <%# end %>
                  <td width="10%">
                   <%= link_to image_tag("x_mark_red.png",size: "12x12"), item, method: :delete, data: { confirm: 'Are you sure you want to delete this item? This action cannot be undone.' }  %>&nbsp;|&nbsp;
                   <%= link_to image_tag("edit_icon.png",size: "14x14"), edit_pack_item_path(item.id) %>
                   <%#= link_to "<button class='btn btn-danger'>Delete</button>".html_safe, item, method: :delete, data: { confirm: 'Are you sure you want to delete this item? This action cannot be undone.' }  %>&nbsp;
                   <%#= link_to "<button class='btn btn-default'>Edit</button>".html_safe, edit_pack_item_path(item.id) %>
                  </td>
            <td width="20%"><%= item.name %></td>
            <td width="20%"><%= item.description %></td>
            <td width="15%"><%= item.manufacturer %></td>
            <td width="10%"><%= item.weight_oz %></td>
            <td width="10%"><%= item.item_count %> </td>
          </tr>
              <% end %>
              <tr style="background-color:white">
                <td colspan=6>
                  <%= link_to "Add New Item", new_pack_item_path(category_id: category.id) %>&nbsp;|&nbsp;
                  <%= link_to "Add Items From Inventory", imports_import_path %>&nbsp;|&nbsp;
                  <%= link_to "Add Items From Another Pack", "javascript:alert('Open Pack Select List');".html_safe %>
                </td>
              </tr>
        </table>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>

